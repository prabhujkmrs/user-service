language: java
jdk: oraclejdk8
install: true
env:
  # You may want to update this to whatever the latest version is, or keep it
  # the same as your local machines. However, I have only tested it with 1.8.0+.
  # There should be a time in the future when this is not necessary - it is
  # explained in more detail below.
  DOCKER_COMPOSE_VERSION: 1.8.0

before_install:
 # Update docker-engine using Ubuntu 'trusty' apt repo
   - >
     curl -sSL "https://get.docker.com/gpg" |
      sudo -E apt-key add -
   - >
     echo "deb https://apt.dockerproject.org/repo ubuntu-trusty main" |
      sudo tee -a /etc/apt/sources.list
   - sudo apt-get update
   - >
     sudo apt-get -o Dpkg::Options::="--force-confdef" \
      -o Dpkg::Options::="--force-confold" --assume-yes install docker-engine
   - docker version
   # Update docker-compose via pip
   - sudo pip install docker-compose
   - docker-compose version
script:
  - ./mvnw clean install
  - bash <(curl -s https://codecov.io/bash)
  -
cache:
  directories:
  - $HOME/.m2
